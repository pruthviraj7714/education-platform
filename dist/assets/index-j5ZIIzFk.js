import{u as G,b as L,r as l,j as e,L as M,B as v,F as z,g as K,h as Q,i as V,k as $,m as q,n as H,o as J}from"./index-BPNOnu4i.js";import{Q as W,B as E}from"./ReactToastify-RTiFja8s.js";import{a as X}from"./index-G-xDdI8w.js";import{I as x,T as B}from"./index-D1mxud5J.js";import{S as p}from"./index-BzG8F655.js";import"./PurePanel-DnULl68u.js";import"./useId-CHcgfaXS.js";import"./useClosable-DPOJKCrc.js";import"./SearchOutlined-Cmj8FuB3.js";import"./index-BLl8_7Zi.js";import"./Overflow-BVtbU1xD.js";const ne=()=>{const b=G(),{user:a}=L(s=>s.auth),[y,F]=l.useState(null),[h,d]=l.useState([]),[S,u]=l.useState(!1),[A,c]=l.useState(!1),[g,k]=l.useState(""),[f,w]=l.useState(""),[n,C]=l.useState(""),[i,j]=l.useState(""),[m,P]=l.useState(""),[o,N]=l.useState(""),D=sessionStorage.getItem("authToken");l.useEffect(()=>{(async()=>{c(!0),await b(H()),c(!1)})()},[b]),l.useEffect(()=>{a&&(k((a==null?void 0:a.name)||"N/A"),w(a.email||"N/A"),F(a.age||"Not provided"),d(a.skills||[]),N(a.gender||"Not provided"))},[a]);const U=async()=>{c(!0);try{const s={email:f,name:g,...n&&{age:n},...i&&{addSkills:i.split(",").map(t=>t.trim())},...m&&{removeSkills:m.split(",").map(t=>t.trim())},...o&&{gender:o}};if(await J.put("https://login-service-phi.vercel.app/v1/user/updateProfile",s,{headers:{Authorization:`Bearer ${D}`}}),n&&F(n),i){const t=i.split(",").map(r=>r.trim());d(r=>[...new Set([...r,...t])])}if(m){const t=m.split(",").map(r=>r.trim());d(r=>r.filter(O=>!t.includes(O)))}E.success("Profile updated successfully!"),u(!1)}catch(s){console.error("Failed to update profile:",s),E.error("Failed to update profile.")}finally{c(!1)}},R=()=>{C(y||""),N(o||""),u(!0),j(""),P("")},T=s=>{s.key==="Enter"&&i.trim()!==""&&(d(t=>[...new Set([...t,i.trim()])]),j(""))},I=s=>{d(t=>t.filter(r=>r!==s))};return e.jsxs("div",{className:"bg-[#f7f7f8] min-h-screen px-[20px] sm:px-[60px]",children:[e.jsx(W,{}),A&&e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx(M,{})}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between items-center pt-[30px]",children:[e.jsx("h2",{className:"text-[24px] leading-[33px] font-semibold text-[#191919]",children:"Profile Details"}),!S&&e.jsxs(v,{onClick:R,variant:"outlined",className:"flex items-center",children:[e.jsx(X,{className:"mr-2"}),"Update Profile"]})]}),S?e.jsxs("div",{className:"bg-white rounded-lg shadow-md mt-4 p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"Name:"}),e.jsx(x,{type:"text",value:g,onChange:s=>k(s.target.value),placeholder:"Enter your name",className:"w-full px-5 py-5 border border-[#F1F1F3] rounded-[8px] placeholder:text-[#B3B3B3] font-normal leading-[21px] bg-[#FCFCFD] focus:outline-none "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2",children:"Email:"}),e.jsx(x,{type:"email",value:f,onChange:s=>w(s.target.value),placeholder:"Enter your email",className:"w-full px-5 py-5 border border-[#F1F1F3] rounded-[8px] placeholder:text-[#B3B3B3] font-normal leading-[21px] bg-[#FCFCFD] focus:outline-none "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 mt-4",children:"Age:"}),e.jsx(x,{type:"number",value:n,onChange:s=>C(s.target.value),placeholder:"Enter your age",className:"w-full px-5 py-5 border border-[#F1F1F3] rounded-[8px] placeholder:text-[#B3B3B3] font-normal leading-[21px] bg-[#FCFCFD] focus:outline-none "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 mt-4",children:"Gender:"}),e.jsxs(p,{value:o,onChange:s=>N(s),placeholder:"Select your gender",className:"w-full h-[60px]",children:[e.jsx(p.Option,{value:"male",children:"Male"}),e.jsx(p.Option,{value:"female",children:"Female"}),e.jsx(p.Option,{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 mt-4",children:"Add Skills:"}),e.jsx(x,{type:"text",value:i,onChange:s=>j(s.target.value),onKeyPress:T,placeholder:"Enter skills to add and press Enter",className:"w-full px-5 py-5 border border-[#F1F1F3] rounded-[8px] placeholder:text-[#B3B3B3] font-normal leading-[21px] bg-[#FCFCFD] focus:outline-none "}),e.jsx("div",{className:"mt-2",children:h.map(s=>e.jsx(B,{closable:!0,onClose:()=>I(s),children:s},s))})]})]}),e.jsxs("div",{className:"flex justify-end mt-4",children:[e.jsx(v,{onClick:()=>u(!1),variant:"outlined",className:"mr-4",children:"Cancel"}),e.jsx(v,{onClick:U,children:"Save Changes"})]})]}):e.jsx("div",{className:"bg-white rounded-lg shadow-md mt-4 p-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-start border p-4 rounded-lg",children:[e.jsx(z,{className:"text-gray-500 mr-2 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Name"}),e.jsx("p",{className:"text-gray-800 font-medium",children:g})]})]}),e.jsxs("div",{className:"flex items-start border p-4 rounded-lg",children:[e.jsx(K,{className:"text-gray-500 mr-2 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Email"}),e.jsx("p",{className:"text-gray-800 font-medium",children:f})]})]}),e.jsxs("div",{className:"flex items-start border p-4 rounded-lg",children:[e.jsx(Q,{className:"text-gray-500 mr-2 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Age"}),e.jsx("p",{className:"text-gray-800 font-medium",children:y})]})]}),e.jsxs("div",{className:"flex items-start border p-4 rounded-lg",children:[e.jsx(V,{className:"text-gray-500 mr-2 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Gender"}),e.jsx("p",{className:"text-gray-800 font-medium",children:o})]})]}),e.jsxs("div",{className:"flex items-start border p-4 rounded-lg",children:[e.jsx($,{className:"text-gray-500 mr-2 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Skills"}),e.jsx("div",{children:h.length>0?h.map(s=>e.jsx(B,{className:"mr-1",children:s},s)):e.jsx("p",{className:"text-gray-600",children:"No skills added"})})]})]}),e.jsxs("div",{className:"flex items-start border p-4 rounded-lg",children:[e.jsx(q,{className:"text-gray-500 mr-2 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Role"}),e.jsx("p",{className:"text-gray-800 font-medium",children:a!=null&&a.roles&&a.roles.length>0?a.roles[0]:"Role not available"})]})]})]})})]})]})};export{ne as default};
