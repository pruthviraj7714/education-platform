import{a8 as z,u as E,a as T,b as v,r as o,b7 as F,j as e,L,aa as Q,b8 as O,b9 as B,ba as G,B as I,bb as H}from"./index-BPNOnu4i.js";function D({}){var p,f;const{courseId:d,quizId:x}=z(),h=E(),N=T(),{loading:g,error:j,quiz:u,questions:m}=v(s=>s.quiz),[n,C]=o.useState({}),[y,k]=o.useState(null),[w,A]=o.useState(!1);o.useEffect(()=>{d&&x&&h(F({courseId:d,quizId:x}))},[d,x,h]);const S=(s,r)=>{C(c=>{var l;const a=c[s];if(((l=m.find(i=>i._id===s))==null?void 0:l.questionType)==="SINGLE_CHOICE")return{...c,[s]:r};{const i=Array.isArray(a)&&a.includes(r);return{...c,[s]:i?a.filter(b=>b!==r):[...a||[],r]}}})},_=async()=>{var c;const s=Object.keys(n).map(a=>{var i;const t=n[a],l=(i=m.find(b=>b._id===a))==null?void 0:i.questionType;return{questionId:a,answer:l==="SINGLE_CHOICE"||Array.isArray(t)?t:[t]}}),r=await h(H({courseId:d,quizId:x,answers:s}));if(r.payload){const t=((c=r==null?void 0:r.payload)==null?void 0:c.submissions).reduce((l,i)=>l+(i.isCorrect?5:0),0);k(t),A(!0)}};return g?e.jsx("div",{className:"flex justify-center items-center h-[70vh]",children:e.jsx(L,{})}):j?e.jsxs("div",{className:"text-red-500 text-center",children:["Error: ",j]}):e.jsxs("div",{className:"mx-[80px] my-[30px] p-6 bg-white rounded-lg shadow-md border",children:[e.jsxs("button",{onClick:()=>N(`/quiz-dashboard/${d}`),className:"flex items-center gap-2 text-primary hover:text-orange-500 mb-6 transition-all",children:[e.jsx(Q,{className:"text-lg"}),e.jsx("span",{children:"Go Back"})]}),u.length>0?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:(p=u[0])==null?void 0:p.title}),e.jsx("p",{className:"text-gray-700 mb-6",children:(f=u[0])==null?void 0:f.description}),w?e.jsxs("div",{className:"mt-6 text-lg font-semibold text-primary",children:["Total Marks: ",y,e.jsxs("p",{className:"mt-2 flex items-center",children:[y!==null&&y>0?"Well done!":"Try again!",e.jsx(O,{className:"text-primary ml-2"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"text-xl font-semibold mb-2",children:[e.jsx(B,{className:"inline mr-2 text-primary"}),"Questions:"]}),e.jsx("ul",{className:"space-y-4",children:m==null?void 0:m.map(s=>{var r,c;return e.jsxs("li",{className:"p-4 border rounded-lg border-gray-200 shadow-sm",children:[e.jsx("p",{className:"text-lg font-medium",children:s==null?void 0:s.content}),e.jsx("ul",{className:"mt-2 space-y-2",children:(c=(r=s==null?void 0:s.solution)==null?void 0:r.options)==null?void 0:c.map(a=>{var t,l;return e.jsx("li",{className:"flex items-center",children:e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:s.questionType==="SINGLE_CHOICE"?"radio":"checkbox",checked:Array.isArray(n[s._id])?(t=n[s._id])==null?void 0:t.includes(a):n[s._id]===a,onChange:()=>S(s._id,a),className:"form-checkbox h-5 w-5 text-primary rounded"}),e.jsx("span",{className:"ml-2 text-gray-600",children:a}),Array.isArray(n[s._id])&&((l=n[s._id])==null?void 0:l.includes(a))&&e.jsx(G,{className:"ml-2 text-green-500"})]})},a)})})]},s._id)})}),e.jsx("div",{className:"mt-4 flex justify-end items-center",children:e.jsx(I,{onClick:_,children:"Submit Answers"})})]})]}):e.jsx("p",{className:"text-center text-gray-500",children:"No quiz data available."})]})}export{D as default};
