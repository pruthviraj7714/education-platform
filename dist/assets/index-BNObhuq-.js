import{r as y,a as P,u as b,c as v,j as e,B as x,f as C}from"./index-BPNOnu4i.js";import{I as n}from"./Input-C4p4FEP5.js";import{u as $,F as I}from"./index.esm-Bae_MGDG.js";import{I as k}from"./index-u7mnOkh9.js";function R(){var i;const c=$(),{handleSubmit:p,register:o,watch:u,formState:{errors:r}}=c,[h,w]=y.useState(!1),l=P(),f=b(),d=(i=v().state)==null?void 0:i.email,j=async s=>{const t=`${s.code1}${s.code2}${s.code3}${s.code4}${s.code5}${s.code6}`;try{await f(C({email:d,password:s.newPassword,otp:t})).unwrap(),w(!0)}catch(a){console.error("Password reset failed:",a)}},g=u("newPassword"),N=(s,t)=>{const a=s.target.value;if(a.length===1&&/^[0-9]$/.test(a)){const m=document.querySelector(`input[name="code${t+2}"]`);m&&m.focus()}};return e.jsx("div",{className:"bg-background-light | min-h-screen | pt-8",children:e.jsx("div",{className:"bg-background p-[40px] rounded-[10px] shadow max-w-[540px] mx-auto",children:h?e.jsxs("div",{className:"text-start",children:[e.jsx("h2",{className:"text-4xl text-secondary font-[550] leading-[46px] mb-4",children:"Password Successfully Reset!"}),e.jsx("p",{className:"text-secondary-light mt-[6px] leading-[25px] text-[16px] font-normal mb-6",children:"Your password has been updated. You can now log in with your new credentials and continue your journey."}),e.jsx(x,{className:"bg-primary w-full",onClick:()=>l("/"),children:"Go to Login"}),e.jsx("p",{className:"mt-[40px] text-[12px] text-[#98989A] text-center",children:"If you face any issues, feel free to contact support."})]}):e.jsxs("div",{className:"text-start",children:[e.jsx("h2",{className:"text-4xl text-secondary font-[550] leading-[46px]",children:"Password reset"}),e.jsxs("p",{className:"text-secondary-light mt-[6px] leading-[25px] text-[16px] font-normal",children:["We sent a code to ",e.jsx("span",{className:"font-semibold",children:d})]}),e.jsx("div",{className:"mt-[40px]",children:e.jsx(I,{...c,children:e.jsxs("form",{className:"max-w-md mx-auto",onSubmit:p(j),children:[e.jsx("div",{className:"block text-[16px] mb-[8px] font-medium text-[#191919]/70",children:"Enter OTP"}),e.jsx("div",{className:"flex justify-center gap-5",children:Array.from({length:6}).map((s,t)=>e.jsx(n,{type:"text",className:"text-center w-[55px] h-[50px]",maxLength:1,...o(`code${t+1}`,{required:!0,onChange:a=>N(a,t)})},t))}),r.code1&&e.jsx("p",{className:"text-red-500",children:"OTP is required"}),e.jsxs("div",{className:"mt-6",children:[e.jsx(n,{label:"New Password",type:"password",placeholder:"New Password",className:"w-full",...o("newPassword",{required:!0,minLength:6})}),r.newPassword&&e.jsx("p",{className:"text-red-500",children:"Password must be at least 6 characters long"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(n,{label:"Confirm Password",type:"password",placeholder:"Confirm Password",className:"w-full",...o("confirmPassword",{required:!0,validate:s=>s===g||"Passwords do not match"})}),r.confirmPassword&&e.jsx("p",{className:"text-red-500",children:r.confirmPassword.message})]}),e.jsx(x,{type:"submit",className:"w-full mt-8 bg-primary text-white rounded py-2",children:"Continue"}),e.jsxs("div",{className:"mt-6 flex items-center justify-center gap-1 cursor-pointer",onClick:()=>l("/"),children:[e.jsx(k,{size:18}),e.jsx("h3",{className:"text-[#191919] text-[16px]",children:"Back to login"})]})]})})})]})})})}export{R as default};
