import{j as e,a as A,u as w,a8 as g,B as p,aD as $}from"./index-BPNOnu4i.js";import{u as f,a as z,F as T,C as x}from"./index.esm-Bae_MGDG.js";import{I as i}from"./Input-C4p4FEP5.js";import{S as j}from"./index-BzG8F655.js";import{I as E}from"./index-DGdLkM9-.js";import"./useId-CHcgfaXS.js";import"./index-BLl8_7Zi.js";import"./PurePanel-DnULl68u.js";import"./Overflow-BVtbU1xD.js";import"./SearchOutlined-Cmj8FuB3.js";const{Option:Q}=j,D=({label:m,options:d,placeholder:l,value:n,onChange:r,className:h})=>e.jsxs("div",{children:[m&&e.jsx("label",{className:"block text-[16px] mb-[8px] font-medium text-[#191919]/70",children:m}),e.jsx(j,{value:n,onChange:r,placeholder:l,className:`w-full rounded-[8px] min-h-[60px] bg-[#FCFCFD] ${h}`,children:d.map(u=>e.jsx(Q,{value:u.value,children:u.label},u.value))})]});function _(){const m=A(),d=w(),{courseId:l}=g(),n=f({defaultValues:{quizName:"",quizDescription:"",questions:[{questionType:"multiple",question:"",options:[{option:""},{option:""},{option:""},{option:""}],correctAnswer:[]}]}}),{control:r,handleSubmit:h}=n,{fields:u,append:b,remove:q}=z({control:r,name:"questions"}),y=()=>{b({questionType:"multiple",question:"",options:[{option:""},{option:""},{option:""},{option:""}],correctAnswer:[]})},N=async c=>{const t={title:c.quizName,description:c.quizDescription,questions:c.questions.map(s=>{const o=s.questionType==="single"?"SINGLE_CHOICE":s.questionType==="multiple"?"MULTIPLE_CHOICE":"TEXT";return{questionType:o,content:s.question,solution:{solution:o==="SINGLE_CHOICE"||Array.isArray(s.correctAnswer)?s.correctAnswer:[s.correctAnswer],options:s.questionType!=="text"?s.options.map(a=>a.option):void 0}}})};try{if(!l){console.error("Course ID is undefined");return}await d($({courseId:l,quizData:t})).unwrap(),m(`/quiz-dashboard/${l}`)}catch(s){console.error("Error creating quiz:",s)}};return e.jsx(T,{...n,children:e.jsxs("form",{onSubmit:h(N),className:"min-h-screen px-[85px] py-[40px]",children:[e.jsx("div",{className:"flex justify-start items-center mb-8",children:e.jsx("h1",{className:"text-[24px] font-semibold",children:"Quiz Builder"})}),e.jsxs("div",{className:"mb-8",children:[e.jsx(i,{name:"quizName",label:"Quiz Name",placeholder:"Enter quiz name",className:"mb-6"}),e.jsx(i,{name:"quizDescription",label:"Quiz Description",placeholder:"Enter quiz description"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-[20px] font-semibold mb-4",children:"Add Questions"}),u.map((c,t)=>e.jsxs("div",{className:"mb-10",children:[e.jsx(x,{name:`questions.${t}.questionType`,control:r,render:({field:s})=>e.jsx(D,{name:`questions.${t}.questionType`,value:s.value,onChange:o=>s.onChange(o),label:"Question Type",placeholder:"Select Question Type",options:[{label:"Single Choice",value:"single"},{label:"Multiple Choice",value:"multiple"},{label:"Text",value:"text"}],className:"mb-4"})}),e.jsx(i,{name:`questions.${t}.question`,label:`Question ${t+1}`,placeholder:"Enter your question",className:"mb-6"}),n.watch(`questions.${t}.questionType`)!=="text"&&e.jsx("div",{className:"grid grid-cols-2 gap-4",children:["A","B","C","D"].map((s,o)=>e.jsx(i,{name:`questions.${t}.options.${o}.option`,label:`Option ${s}`,placeholder:`Enter option ${s}`,className:"mb-6"},o))}),n.watch(`questions.${t}.questionType`)==="multiple"?e.jsx(x,{name:`questions.${t}.correctAnswer`,control:r,render:({field:s})=>e.jsxs("div",{children:[Array.isArray(s.value)&&s.value.map((o,a)=>e.jsx(i,{name:`questions.${t}.correctAnswer.${a}`,value:o,onChange:C=>{const v=[...s.value];v[a]=C.target.value,s.onChange(v)},label:`Correct Answer ${a+1}`,placeholder:"Enter a correct answer",className:"mb-4"},a)),e.jsx(p,{type:"button",variant:"outlined",onClick:()=>s.onChange([...s.value||[],""]),children:"Add Answer"})]})}):e.jsx(x,{name:`questions.${t}.correctAnswer`,control:r,render:({field:s})=>e.jsx(i,{name:`questions.${t}.correctAnswer`,value:s.value,onChange:o=>s.onChange(o.target.value),label:"Correct Answer",placeholder:"Enter the correct answer",className:"mb-4"})}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(p,{type:"button",variant:"outlined",onClick:()=>q(t),children:"Remove Question"})})]},c.id)),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(p,{type:"button",variant:"outlined",className:"flex items-center gap-2",onClick:y,children:[e.jsx(E,{})," Add Question"]}),e.jsx(p,{type:"submit",variant:"outlined",className:"flex items-center gap-2",children:"Save"})]})]})]})})}export{_ as default};
